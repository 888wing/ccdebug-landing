/*! For license information please see contentScript.js.LICENSE.txt */
(()=>{var r={102:r=>{function e(){var r,o,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(e,n,i,a){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return t(l,"_invoke",function(e,t,n){var i,a,c,s=0,l=n||[],f=!1,p={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(e,t){return i=e,a=0,c=r,p.n=t,u}};function d(e,t){for(a=e,c=t,o=0;!f&&s&&!n&&o<l.length;o++){var n,i=l[o],d=p.p,v=i[2];e>3?(n=v===t)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=r):i[0]<=d&&((n=e<2&&d<i[1])?(a=0,p.v=t,p.n=i[1]):d<v&&(n=e<3||i[0]>t||t>v)&&(i[4]=e,i[5]=t,p.n=v,a=0))}if(n||e>1)return u;throw f=!0,t}return function(n,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,v),a=l,c=v;(o=a<2?r:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(n="next"),o=i[n]){if(!(o=o.call(i,c)))throw TypeError("iterator result is not an object");if(!o.done)return o;c=o.value,a<2&&(a=0)}else 1===a&&(o=i.return)&&o.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=r}else if((o=(f=p.n<0)?c:e.call(t,p))!==u)break}catch(e){i=r,a=1,c=e}finally{s=1}}return{value:o,done:f}}}(e,i,a),!0),l}var u={};function s(){}function l(){}function f(){}o=Object.getPrototypeOf;var p=[][i]?o(o([][i]())):(t(o={},i,function(){return this}),o),d=f.prototype=s.prototype=Object.create(p);function v(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,f):(r.__proto__=f,t(r,a,"GeneratorFunction")),r.prototype=Object.create(d),r}return l.prototype=f,t(d,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,a,"GeneratorFunction"),t(d),t(d,a,"Generator"),t(d,i,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:v}})()}function t(r,e,o,n){var i=Object.defineProperty;try{i({},"",{})}catch(r){i=0}t=function(r,e,o,n){function a(e,o){t(r,e,function(r){return this._invoke(e,o,r)})}e?i?i(r,e,{value:o,enumerable:!n,configurable:!n,writable:!n}):r[e]=o:(a("next",0),a("throw",1),a("return",2))},t(r,e,o,n)}function o(r,e,t,o,n,i,a){try{var c=r[i](a),u=c.value}catch(r){return void t(r)}c.done?e(u):Promise.resolve(u).then(o,n)}function n(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function c(r){o(a,n,i,c,u,"next",r)}function u(r){o(a,n,i,c,u,"throw",r)}c(void 0)})}}function i(r){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},i(r)}function a(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,c(o.key),o)}}function c(r){var e=function(r){if("object"!=i(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!=i(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==i(e)?e:e+""}var u=function(){return r=function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.errors=[],this.isMonitoring=!0,this.setupListeners()},t=[{key:"setupListeners",value:function(){var r=this;window.addEventListener("error",this.handleError.bind(this),!0),window.addEventListener("unhandledrejection",this.handlePromiseRejection.bind(this),!0),this.interceptConsole(),this.interceptFetch(),this.interceptXHR(),this.detectReactErrors(),this.detectVueErrors(),this.detectAngularErrors(),window.addEventListener("message",function(e){"CCDEBUGGER_ANALYZE"===e.data.type&&r.forceAnalysis()})}},{key:"handleError",value:function(r){var e,t;if(this.isMonitoring){var o={type:"runtime_error",message:r.message||"Unknown error",source:r.filename||window.location.href,line:r.lineno,column:r.colno,stack:(null===(e=r.error)||void 0===e?void 0:e.stack)||"",url:window.location.href,timestamp:(new Date).toISOString()};null!==(t=r.error)&&void 0!==t&&t.name&&(o.errorName=r.error.name),this.reportError(o)}}},{key:"handlePromiseRejection",value:function(r){var e,t,o;if(this.isMonitoring){var n={type:"promise_rejection",message:(null===(e=r.reason)||void 0===e?void 0:e.message)||(null===(t=r.reason)||void 0===t?void 0:t.toString())||"Unhandled Promise Rejection",reason:r.reason,stack:(null===(o=r.reason)||void 0===o?void 0:o.stack)||"",url:window.location.href,timestamp:(new Date).toISOString()};this.reportError(n)}}},{key:"interceptConsole",value:function(){var r=this,e=console.error,t=console.warn;console.error=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];r.isMonitoring&&r.captureConsoleError("error",o),e.apply(console,o)},console.warn=function(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];r.isMonitoring&&r.shouldCaptureWarning(o)&&r.captureConsoleError("warning",o),t.apply(console,o)}}},{key:"captureConsoleError",value:function(r,e){var t=e.map(function(r){if("object"===i(r))try{return JSON.stringify(r,null,2)}catch(e){return String(r)}return String(r)}).join(" "),o={type:"console_".concat(r),message:t,url:window.location.href,timestamp:(new Date).toISOString()},n=(new Error).stack;if(n){var a=n.split("\n");o.stack=a.slice(3).join("\n")}this.reportError(o)}},{key:"shouldCaptureWarning",value:function(r){var e=r.join(" ").toLowerCase();return["error","fail","exception","critical","fatal"].some(function(r){return e.includes(r)})}},{key:"interceptFetch",value:function(){var r=this,t=window.fetch;window.fetch=n(e().m(function o(){var n,i,a,c,u,s,l,f,p,d,v,h=arguments;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:for(n=Date.now(),i=h.length,a=new Array(i),c=0;c<i;c++)a[c]=h[c];return u=a[0],s=a[1],l="string"==typeof u?u:u.url,e.p=1,e.n=2,t.apply(window,a);case 2:return!(f=e.v).ok&&r.isMonitoring&&(p=Date.now()-n,r.captureNetworkError("fetch",{url:l,method:(null==s?void 0:s.method)||"GET",status:f.status,statusText:f.statusText,duration:p})),e.a(2,f);case 3:throw e.p=3,v=e.v,r.isMonitoring&&(d=Date.now()-n,r.captureNetworkError("fetch",{url:l,method:(null==s?void 0:s.method)||"GET",error:v.message,duration:d})),v;case 4:return e.a(2)}},o,null,[[1,3]])}))}},{key:"interceptXHR",value:function(){var r=XMLHttpRequest.prototype.open,e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(e,t){this._ccDebugger={method:e,url:t,startTime:null};for(var o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];return r.apply(this,[e,t].concat(n))},XMLHttpRequest.prototype.send=function(){var r=this;this._ccDebugger&&(this._ccDebugger.startTime=Date.now(),this.addEventListener("load",function(){var e;if(r.status>=400&&null!==(e=window.ccDebuggerErrorDetector)&&void 0!==e&&e.isMonitoring){var t=Date.now()-r._ccDebugger.startTime;window.ccDebuggerErrorDetector.captureNetworkError("xhr",{url:r._ccDebugger.url,method:r._ccDebugger.method,status:r.status,statusText:r.statusText,duration:t})}}),this.addEventListener("error",function(){var e;if(null!==(e=window.ccDebuggerErrorDetector)&&void 0!==e&&e.isMonitoring){var t=Date.now()-r._ccDebugger.startTime;window.ccDebuggerErrorDetector.captureNetworkError("xhr",{url:r._ccDebugger.url,method:r._ccDebugger.method,error:"Network request failed",duration:t})}}));for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return e.apply(this,o)}}},{key:"captureNetworkError",value:function(r,e){var t={type:"network_error",message:"".concat(r.toUpperCase()," ").concat(e.method," ").concat(e.url," - ").concat(e.status||e.error),networkDetails:e,url:window.location.href,timestamp:(new Date).toISOString()};this.reportError(t)}},{key:"detectReactErrors",value:function(){var r=this;if(window.React||window.__REACT_DEVTOOLS_GLOBAL_HOOK__){var e=console.error;console.error=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i=o.join(" ");i.includes("React")&&r.isMonitoring&&r.captureFrameworkError("React",i,o),e.apply(console,o)}}}},{key:"detectVueErrors",value:function(){var r=this;window.Vue&&(window.Vue.config.errorHandler=function(e,t,o){r.isMonitoring&&r.captureFrameworkError("Vue",e.message,{stack:e.stack,info:o,component:(null==t?void 0:t.$options.name)||"Unknown"})}),window.__VUE__&&console.log("CCDebugger: Vue 3 detected. Configure error handling in your app.")}},{key:"detectAngularErrors",value:function(){var r=this;if(window.Zone){var e=console.error;console.error=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i=o.join(" ");(i.includes("Angular")||i.includes("ng"))&&r.isMonitoring&&r.captureFrameworkError("Angular",i,o),e.apply(console,o)}}}},{key:"captureFrameworkError",value:function(r,e,t){var o={type:"framework_error",framework:r,message:"string"==typeof e?e:String(e),details:t,url:window.location.href,timestamp:(new Date).toISOString()};null!=t&&t.stack&&(o.stack=t.stack),this.reportError(o)}},{key:"reportError",value:function(r){this.errors.some(function(e){return e.message===r.message&&e.type===r.type&&Math.abs(new Date(e.timestamp)-new Date(r.timestamp))<1e3})||(this.errors.push(r),chrome.runtime.sendMessage({action:"error_detected",error:r}).catch(function(r){console.warn("CCDebugger: Failed to send error to background",r)}))}},{key:"forceAnalysis",value:function(){this.errors.forEach(function(r){chrome.runtime.sendMessage({action:"error_detected",error:r}).catch(function(){})})}},{key:"setMonitoring",value:function(r){this.isMonitoring=r}}],t&&a(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,t}();window.ccDebuggerErrorDetector=new u,r.exports&&(r.exports=u)}},e={};!function t(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return r[o](i,i.exports,t),i.exports}(102)})();